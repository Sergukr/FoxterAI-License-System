//+------------------------------------------------------------------+
//|                                            9_panel_create.mqh |
//|                     –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ –¥–ª—è FoxterAI v2.0           |
//|                  –° –ö–ù–û–ü–ö–û–ô "–ó–ê–ö–†–´–¢–¨ –†–û–ë–û–¢–ê"                     |
//+------------------------------------------------------------------+

//+------------------------------------------------------------------+
//| –°–û–ó–î–ê–ù–ò–ï –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–û–ô –ü–ê–ù–ï–õ–ò - –í–ï–†–°–ò–Ø 2.0                      |
//+------------------------------------------------------------------+
void CreateInteractivePanel() {
    // –í–ê–ñ–ù–û: –°–Ω–∞—á–∞–ª–∞ —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–∞–Ω–µ–ª—å –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å
    DeletePanel();
    
    // –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏
    int x = g_PanelPosX;
    int y = g_PanelPosY;
    int currentY = y;
    
    Print("–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏ v2.0 –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏: X=", x, " Y=", y);
    
    //--- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º DPI –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
    double dpiScale = GetDPIScale();
    
    //--- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Å —É—á–µ—Ç–æ–º DPI (–£–í–ï–õ–ò–ß–ï–ù–ê –í–´–°–û–¢–ê!)
    int panelWidth = (int)(PANEL_WIDTH * dpiScale);
    int panelHeight = (int)(460 * dpiScale);  // –£–í–ï–õ–ò–ß–ï–ù–û –¥–æ 460 –¥–ª—è –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏
    int buttonHeight = (int)(BUTTON_HEIGHT * dpiScale);
    int editHeight = (int)(EDIT_HEIGHT * dpiScale);
    int fontSize9 = (int)(9 * dpiScale);
    int fontSize10 = (int)(10 * dpiScale);
    int fontSize11 = (int)(11 * dpiScale);
    
    //--- –û—Ç—Å—Ç—É–ø—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã (–£–í–ï–õ–ò–ß–ï–ù–´!)
    int marginLeft = (int)(10 * dpiScale);
    int marginRight = (int)(10 * dpiScale);
    int spacing = (int)(3 * dpiScale);
    int lineSpacing = (int)(18 * dpiScale);     // –£–í–ï–õ–ò–ß–ï–ù–û —Å 14 –¥–æ 18
    int sectionSpacing = (int)(24 * dpiScale);  // –£–í–ï–õ–ò–ß–ï–ù–û —Å 20 –¥–æ 24
    
    //--- –§–æ–Ω –ø–∞–Ω–µ–ª–∏ (–ø—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω)
    string bgName = PANEL_PREFIX + "Background";
    if(ObjectFind(0, bgName) >= 0) ObjectDelete(0, bgName);
    ObjectCreate(0, bgName, OBJ_RECTANGLE_LABEL, 0, 0, 0);
    ObjectSetInteger(0, bgName, OBJPROP_CORNER, CORNER_LEFT_UPPER);
    ObjectSetInteger(0, bgName, OBJPROP_XDISTANCE, x);
    ObjectSetInteger(0, bgName, OBJPROP_YDISTANCE, y);
    ObjectSetInteger(0, bgName, OBJPROP_XSIZE, panelWidth);
    ObjectSetInteger(0, bgName, OBJPROP_YSIZE, panelHeight);
    ObjectSetInteger(0, bgName, OBJPROP_BGCOLOR, C'43,45,48');
    ObjectSetInteger(0, bgName, OBJPROP_BORDER_TYPE, BORDER_RAISED);
    ObjectSetInteger(0, bgName, OBJPROP_COLOR, C'60,63,65');
    ObjectSetInteger(0, bgName, OBJPROP_WIDTH, 1);
    ObjectSetInteger(0, bgName, OBJPROP_BACK, false);
    ObjectSetInteger(0, bgName, OBJPROP_SELECTABLE, false);
    ObjectSetInteger(0, bgName, OBJPROP_SELECTED, false);
    ObjectSetInteger(0, bgName, OBJPROP_HIDDEN, false);
    ObjectSetInteger(0, bgName, OBJPROP_ZORDER, 1000);
    
    currentY += (int)(5 * dpiScale);  // –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –æ—Ç –≤–µ—Ä—Ö–∞
    
    //--- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
    CreateAdaptiveLabel(PANEL_PREFIX + "Title", "FoxterAI v2.0", x + marginLeft, currentY, 
                       C'212,175,55', fontSize11, dpiScale);
    
    //--- –°—Ç–∞—Ç—É—Å –ª–∏—Ü–µ–Ω–∑–∏–∏ —Ä—è–¥–æ–º —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
    string licenseText = "–õ–∏—Ü: " + GetLicenseStatusText();
    color licenseColor = GetLicenseStatusColor();
    CreateAdaptiveLabel(PANEL_PREFIX + "LicenseStatus", licenseText, 
                       x + marginLeft + (int)(100 * dpiScale), currentY, 
                       licenseColor, fontSize9, dpiScale);
    
    //--- –¢—Ä–µ–Ω–¥ –≤ –ø—Ä–∞–≤–æ–º —É–≥–ª—É
    string trendText = "–¢—Ä–µ–Ω–¥: ";
    color trendColor;
    if(g_TrendState == TREND_BUY) {
        trendText += "BUY";
        trendColor = C'76,175,80';
    } else if(g_TrendState == TREND_SELL) {
        trendText += "SELL";
        trendColor = C'244,67,54';
    } else {
        trendText += "–ù–ï–¢";
        trendColor = C'158,158,158';
    }
    CreateAdaptiveLabel(PANEL_PREFIX + "TrendInfo", trendText, 
                       x + panelWidth - marginRight - (int)(80 * dpiScale), currentY, 
                       trendColor, fontSize11, dpiScale);
    
    currentY += sectionSpacing;
    CreateAdaptiveSeparator(PANEL_PREFIX + "Sep1", x + marginLeft/2, currentY, 
                           panelWidth - marginLeft, dpiScale);
    currentY += (int)(5 * dpiScale);
    
    //=== –ë–õ–û–ö 1: –£–ü–†–ê–í–õ–ï–ù–ò–ï ===
    CreateAdaptiveLabel(PANEL_PREFIX + "MainControl", "–£–ü–†–ê–í–õ–ï–ù–ò–ï", x + marginLeft, currentY, 
                       C'212,175,55', fontSize10, dpiScale);
    currentY += (int)(18 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –ø–æ—Å–ª–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
    
    //--- START/STOP
    string btnText = g_BotEnabled ? "STOP" : "START";
    color btnColor = g_BotEnabled ? C'198,40,40' : C'46,125,50';
    CreateAdaptiveButton(PANEL_PREFIX + "BtnStartStop", btnText, x + marginLeft, currentY, 
                        (int)(60 * dpiScale), buttonHeight, btnColor, C'224,224,224', dpiScale);
    CreateAdaptiveLabel(PANEL_PREFIX + "Status", g_BotEnabled ? "–ê–∫—Ç–∏–≤–µ–Ω" : "–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω", 
                       x + marginLeft + (int)(65 * dpiScale), currentY + spacing, 
                       g_BotEnabled ? C'76,175,80' : C'244,67,54', fontSize9, dpiScale);
    currentY += buttonHeight + (int)(6 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    //--- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–∏
    CreateAdaptiveLabel(PANEL_PREFIX + "LblDirection", "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:", x + marginLeft, 
                       currentY + spacing, C'224,224,224', fontSize9, dpiScale);
    int btnDirX = x + marginLeft + (int)(80 * dpiScale);
    int btnDirWidth = (int)(65 * dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnBuy", "BUY", btnDirX, currentY, 
                        btnDirWidth, buttonHeight,
                        g_TradeDirection == TRADE_BUY_ONLY ? C'46,125,50' : C'66,66,66', 
                        C'224,224,224', dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnSell", "SELL", 
                        btnDirX + btnDirWidth + spacing, currentY, 
                        btnDirWidth, buttonHeight,
                        g_TradeDirection == TRADE_SELL_ONLY ? C'198,40,40' : C'66,66,66', 
                        C'224,224,224', dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnBoth", "BOTH", 
                        btnDirX + 2 * (btnDirWidth + spacing), currentY, 
                        btnDirWidth, buttonHeight,
                        g_TradeDirection == TRADE_BOTH ? C'33,150,243' : C'66,66,66', 
                        C'224,224,224', dpiScale);
    currentY += buttonHeight + (int)(6 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    //--- –ú–∞–∫—Å –æ—Ä–¥–µ—Ä–æ–≤ Buy
    CreateAdaptiveLabel(PANEL_PREFIX + "LblMaxBuy", "–ú–∞–∫—Å Buy:", x + marginLeft, 
                       currentY + spacing/2, C'224,224,224', fontSize9, dpiScale);
    int editMaxBuyX = x + marginLeft + (int)(60 * dpiScale);
    CreateAdaptiveEdit(PANEL_PREFIX + "EditMaxBuy", IntegerToString(g_MaxOrdersBuy), 
                      editMaxBuyX, currentY, (int)(40 * dpiScale), editHeight, dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnApplyMaxBuy", "OK", 
                        editMaxBuyX + (int)(43 * dpiScale), currentY, 
                        (int)(25 * dpiScale), editHeight, C'46,125,50', C'224,224,224', dpiScale);
    
    //--- –ú–∞–∫—Å –æ—Ä–¥–µ—Ä–æ–≤ Sell (–≤ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–µ)
    int sellControlX = x + marginLeft + (int)(150 * dpiScale);
    CreateAdaptiveLabel(PANEL_PREFIX + "LblMaxSell", "–ú–∞–∫—Å Sell:", sellControlX, 
                       currentY + spacing/2, C'224,224,224', fontSize9, dpiScale);
    int editMaxSellX = sellControlX + (int)(60 * dpiScale);
    CreateAdaptiveEdit(PANEL_PREFIX + "EditMaxSell", IntegerToString(g_MaxOrdersSell), 
                      editMaxSellX, currentY, (int)(40 * dpiScale), editHeight, dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnApplyMaxSell", "OK", 
                        editMaxSellX + (int)(43 * dpiScale), currentY, 
                        (int)(25 * dpiScale), editHeight, C'46,125,50', C'224,224,224', dpiScale);
    currentY += editHeight + (int)(6 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    //--- –ü—Ä–æ—Ñ–∏—Ç %
    CreateAdaptiveLabel(PANEL_PREFIX + "LblProfit", "–ü—Ä–æ—Ñ–∏—Ç %:", x + marginLeft, 
                       currentY + spacing/2, C'224,224,224', fontSize9, dpiScale);
    int editProfitX = x + marginLeft + (int)(60 * dpiScale);
    CreateAdaptiveEdit(PANEL_PREFIX + "EditProfit", DoubleToString(g_BasketProfitPercent, 2), 
                      editProfitX, currentY, (int)(40 * dpiScale), editHeight, dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnApplyProfit", "OK", 
                        editProfitX + (int)(43 * dpiScale), currentY, 
                        (int)(25 * dpiScale), editHeight, C'46,125,50', C'224,224,224', dpiScale);
    currentY += editHeight + (int)(6 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    //--- –¢–∏–ø –∫–æ—Ä–∑–∏–Ω—ã
    CreateAdaptiveLabel(PANEL_PREFIX + "LblBasket", "–ö–æ—Ä–∑–∏–Ω–∞:", x + marginLeft, 
                       currentY + spacing/2, C'224,224,224', fontSize9, dpiScale);
    int basketBtnX = x + marginLeft + (int)(55 * dpiScale);
    int basketBtnWidth = (int)(50 * dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnBasketNone", "–ù–ï–¢", basketBtnX, currentY, 
                        basketBtnWidth, editHeight,
                        g_BasketType == BASKET_NONE ? C'46,125,50' : C'66,66,66', 
                        C'224,224,224', dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnBasketImm", "–°–†–ê–ó–£", 
                        basketBtnX + basketBtnWidth + spacing, currentY, 
                        (int)(55 * dpiScale), editHeight,
                        g_BasketType == BASKET_IMMEDIATE ? C'46,125,50' : C'66,66,66', 
                        C'224,224,224', dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnBasketAfter", "–ü–û–°–õ–ï", 
                        basketBtnX + basketBtnWidth + (int)(58 * dpiScale) + spacing, currentY, 
                        (int)(55 * dpiScale), editHeight,
                        g_BasketType == BASKET_AFTER_N ? C'46,125,50' : C'66,66,66', 
                        C'224,224,224', dpiScale);
    int basketNX = basketBtnX + basketBtnWidth + (int)(116 * dpiScale) + spacing;
    CreateAdaptiveEdit(PANEL_PREFIX + "EditBasketN", IntegerToString(g_BasketAfterN), 
                      basketNX, currentY, (int)(30 * dpiScale), editHeight, dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnApplyBasketN", "OK", 
                        basketNX + (int)(33 * dpiScale), currentY, 
                        (int)(23 * dpiScale), editHeight, C'46,125,50', C'224,224,224', dpiScale);
    currentY += editHeight + (int)(8 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    CreateAdaptiveSeparator(PANEL_PREFIX + "Sep2", x + marginLeft/2, currentY, 
                           panelWidth - marginLeft, dpiScale);
    currentY += (int)(5 * dpiScale);
    
    //=== –ë–õ–û–ö 2: –ò–ù–§–û–†–ú–ê–¶–ò–Ø ===
    CreateAdaptiveLabel(PANEL_PREFIX + "InfoTitle", "–ò–ù–§–û–†–ú–ê–¶–ò–Ø", x + marginLeft, currentY, 
                       C'212,175,55', fontSize10, dpiScale);
    currentY += (int)(18 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    //--- –ü–æ–∑–∏—Ü–∏–∏ Buy
    CreateAdaptiveLabel(PANEL_PREFIX + "InfoBuy", "Buy: –Ω–µ—Ç –ø–æ–∑–∏—Ü–∏–π", x + marginLeft, currentY, 
                       C'224,224,224', fontSize9, dpiScale);
    currentY += lineSpacing;
    
    //--- –¶–µ–ª–µ–≤–æ–π TP –¥–ª—è Buy (–ù–û–í–û–ï!)
    CreateAdaptiveLabel(PANEL_PREFIX + "InfoBuyTP", "", x + marginLeft + (int)(15 * dpiScale), 
                       currentY, C'76,175,80', fontSize9, dpiScale);
    currentY += lineSpacing;
    
    //--- –ü–æ–∑–∏—Ü–∏–∏ Sell
    CreateAdaptiveLabel(PANEL_PREFIX + "InfoSell", "Sell: –Ω–µ—Ç –ø–æ–∑–∏—Ü–∏–π", x + marginLeft, currentY, 
                       C'224,224,224', fontSize9, dpiScale);
    currentY += lineSpacing;
    
    //--- –¶–µ–ª–µ–≤–æ–π TP –¥–ª—è Sell (–ù–û–í–û–ï!)
    CreateAdaptiveLabel(PANEL_PREFIX + "InfoSellTP", "", x + marginLeft + (int)(15 * dpiScale), 
                       currentY, C'244,67,54', fontSize9, dpiScale);
    currentY += (int)(20 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
    
    //--- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (2 –∫–æ–ª–æ–Ω–∫–∏)
    CreateAdaptiveLabel(PANEL_PREFIX + "ProfitToday", "–°–µ–≥–æ–¥–Ω—è: $0.00", x + marginLeft, currentY, 
                       C'224,224,224', fontSize9, dpiScale);
    CreateAdaptiveLabel(PANEL_PREFIX + "ProfitYesterday", "–í—á–µ—Ä–∞: $0.00", 
                       x + marginLeft + (int)(140 * dpiScale), currentY, 
                       C'224,224,224', fontSize9, dpiScale);
    currentY += lineSpacing;
    CreateAdaptiveLabel(PANEL_PREFIX + "ProfitWeek", "–ù–µ–¥–µ–ª—è: $0.00", x + marginLeft, currentY, 
                       C'224,224,224', fontSize9, dpiScale);
    CreateAdaptiveLabel(PANEL_PREFIX + "ProfitMonth", "–ú–µ—Å—è—Ü: $0.00", 
                       x + marginLeft + (int)(140 * dpiScale), currentY, 
                       C'224,224,224', fontSize9, dpiScale);
    currentY += (int)(20 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    //--- –°—á–µ—Ç
    CreateAdaptiveLabel(PANEL_PREFIX + "AccountInfo", "–ë–∞–ª–∞–Ω—Å/–≠–∫–≤–∏—Ç–∏: $1000.00 / $999.97", 
                       x + marginLeft, currentY, C'224,224,224', fontSize9, dpiScale);
    currentY += lineSpacing;
    CreateAdaptiveLabel(PANEL_PREFIX + "DrawdownInfo", "–ü—Ä–æ—Å–∞–¥–∫–∞: $0.03 (0.0%)", 
                       x + marginLeft, currentY, C'224,224,224', fontSize9, dpiScale);
    currentY += (int)(20 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    CreateAdaptiveSeparator(PANEL_PREFIX + "Sep3", x + marginLeft/2, currentY, 
                           panelWidth - marginLeft, dpiScale);
    currentY += (int)(5 * dpiScale);
    
    //=== –ë–õ–û–ö 3: –≠–ö–°–¢–†–ï–ù–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï ===
    CreateAdaptiveLabel(PANEL_PREFIX + "EmergencyTitle", "–≠–ö–°–¢–†–ï–ù–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï", 
                       x + marginLeft, currentY, C'212,175,55', fontSize10, dpiScale);
    currentY += (int)(18 * dpiScale);  // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø
    
    int closeBtnWidth = (int)(88 * dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnCloseBuy", "CLOSE BUY", x + marginLeft, currentY, 
                        closeBtnWidth, buttonHeight, C'255,152,0', C'255,255,255', dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnCloseSell", "CLOSE SELL", 
                        x + marginLeft + closeBtnWidth + spacing, currentY, 
                        closeBtnWidth, buttonHeight, C'255,152,0', C'255,255,255', dpiScale);
    CreateAdaptiveButton(PANEL_PREFIX + "BtnCloseAll", "CLOSE ALL", 
                        x + marginLeft + 2 * (closeBtnWidth + spacing), currentY, 
                        closeBtnWidth, buttonHeight, C'244,67,54', C'255,255,255', dpiScale);
    
    currentY += buttonHeight + (int)(10 * dpiScale);
    CreateAdaptiveSeparator(PANEL_PREFIX + "Sep4", x + marginLeft/2, currentY, 
                           panelWidth - marginLeft, dpiScale);
    currentY += (int)(5 * dpiScale);
    
    //=== –ù–û–í–´–ô –ë–õ–û–ö 4: –ó–ê–ö–†–´–¢–ò–ï –†–û–ë–û–¢–ê ===
    CreateAdaptiveLabel(PANEL_PREFIX + "CloseTitle", "–ó–ê–ö–†–´–¢–ò–ï –†–û–ë–û–¢–ê", 
                       x + marginLeft, currentY, C'212,175,55', fontSize10, dpiScale);
    currentY += (int)(18 * dpiScale);
    
    // –ö–Ω–æ–ø–∫–∞ "–ó–ê–ö–†–´–¢–¨ –†–û–ë–û–¢–ê" - —Ñ–∏–æ–ª–µ—Ç–æ–≤–∞—è —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó
    CreateAdaptiveButton(PANEL_PREFIX + "BtnCloseRobot", "üî¥ –ó–ê–ö–†–´–¢–¨ –†–û–ë–û–¢–ê", 
                        x + marginLeft, currentY, 
                        panelWidth - 2 * marginLeft, (int)(buttonHeight * 1.3), 
                        C'156,39,176', C'255,255,255', dpiScale);  // –§–∏–æ–ª–µ—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞
    
    currentY += (int)(buttonHeight * 1.3) + (int)(5 * dpiScale);
    
    //--- –ü–æ–¥–ø–∏—Å—å –≤–Ω–∏–∑—É –ø–∞–Ω–µ–ª–∏
    CreateAdaptiveLabel(PANEL_PREFIX + "Footer", "üìÅ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ v2.0", 
                       x + panelWidth/2 - (int)(80 * dpiScale), currentY, 
                       C'158,158,158', fontSize9, dpiScale);
    
    //--- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    Print("‚úÖ –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞");
    ChartRedraw();
}

//+------------------------------------------------------------------+
//| –û–ë–ù–û–í–ò–¢–¨ –ó–ù–ê–ß–ï–ù–ò–Ø –ù–ê –ü–ê–ù–ï–õ–ò –ü–û–°–õ–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ü–ê–†–ê–ú–ï–¢–†–û–í         |
//+------------------------------------------------------------------+
void RefreshPanelValues() {
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞ —Å —Ç–µ–∫—É—â–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
    ObjectSetString(0, PANEL_PREFIX + "EditMaxBuy", OBJPROP_TEXT, IntegerToString(g_MaxOrdersBuy));
    ObjectSetString(0, PANEL_PREFIX + "EditMaxSell", OBJPROP_TEXT, IntegerToString(g_MaxOrdersSell));
    ObjectSetString(0, PANEL_PREFIX + "EditProfit", OBJPROP_TEXT, DoubleToString(g_BasketProfitPercent, 2));
    ObjectSetString(0, PANEL_PREFIX + "EditBasketN", OBJPROP_TEXT, IntegerToString(g_BasketAfterN));
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫–Ω–æ–ø–æ–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏
    if(g_TradeDirection == TRADE_BUY_ONLY) {
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBuy", OBJPROP_BGCOLOR, C'46,125,50');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnSell", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBoth", OBJPROP_BGCOLOR, C'66,66,66');
    }
    else if(g_TradeDirection == TRADE_SELL_ONLY) {
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBuy", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnSell", OBJPROP_BGCOLOR, C'198,40,40');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBoth", OBJPROP_BGCOLOR, C'66,66,66');
    }
    else if(g_TradeDirection == TRADE_BOTH) {
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBuy", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnSell", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBoth", OBJPROP_BGCOLOR, C'33,150,243');
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫–Ω–æ–ø–æ–∫ —Ç–∏–ø–∞ –∫–æ—Ä–∑–∏–Ω—ã
    if(g_BasketType == BASKET_NONE) {
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketNone", OBJPROP_BGCOLOR, C'46,125,50');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketImm", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketAfter", OBJPROP_BGCOLOR, C'66,66,66');
    }
    else if(g_BasketType == BASKET_IMMEDIATE) {
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketNone", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketImm", OBJPROP_BGCOLOR, C'46,125,50');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketAfter", OBJPROP_BGCOLOR, C'66,66,66');
    }
    else if(g_BasketType == BASKET_AFTER_N) {
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketNone", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketImm", OBJPROP_BGCOLOR, C'66,66,66');
        ObjectSetInteger(0, PANEL_PREFIX + "BtnBasketAfter", OBJPROP_BGCOLOR, C'46,125,50');
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É Start/Stop
    ObjectSetString(0, PANEL_PREFIX + "BtnStartStop", OBJPROP_TEXT, 
                   g_BotEnabled ? "STOP" : "START");
    ObjectSetInteger(0, PANEL_PREFIX + "BtnStartStop", OBJPROP_BGCOLOR, 
                    g_BotEnabled ? C'198,40,40' : C'46,125,50');
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    ObjectSetString(0, PANEL_PREFIX + "Status", OBJPROP_TEXT, 
                   g_BotEnabled ? "–ê–∫—Ç–∏–≤–µ–Ω" : "–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω");
    ObjectSetInteger(0, PANEL_PREFIX + "Status", OBJPROP_COLOR, 
                    g_BotEnabled ? C'76,175,80' : C'244,67,54');
    
    Print("‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –ø–∞–Ω–µ–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏");
    ChartRedraw();
}

//+------------------------------------------------------------------+
//| –ü–û–õ–£–ß–ï–ù–ò–ï DPI –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø                                    |
//+------------------------------------------------------------------+
double GetDPIScale() {
    //--- –ü–æ–ª—É—á–∞–µ–º —Ä–∞–∑–º–µ—Ä –≥—Ä–∞—Ñ–∏–∫–∞
    long chartWidth = ChartGetInteger(0, CHART_WIDTH_IN_PIXELS);
    
    //--- –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞—Å—à—Ç–∞–± –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∏—Ä–∏–Ω—ã –≥—Ä–∞—Ñ–∏–∫–∞
    double scale = 1.0;
    
    if(chartWidth <= 1366) {
        scale = 1.0;  // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
    }
    else if(chartWidth <= 1920) {
        scale = 1.1;  // Full HD
    }
    else if(chartWidth <= 2560) {
        scale = 1.25; // 2K
    }
    else {
        scale = 1.5;  // 4K –∏ –≤—ã—à–µ
    }
    
    return scale;
}

//+------------------------------------------------------------------+
//| –°–û–ó–î–ê–ù–ò–ï –ê–î–ê–ü–¢–ò–í–ù–û–ô –ö–ù–û–ü–ö–ò                                       |
//+------------------------------------------------------------------+
bool CreateAdaptiveButton(string name, string text, int x, int y, int width, int height, 
                          color bgColor, color textColor, double scale) {
    if(ObjectFind(0, name) >= 0) ObjectDelete(0, name);
    
    if(!ObjectCreate(0, name, OBJ_BUTTON, 0, 0, 0)) return false;
    
    ObjectSetInteger(0, name, OBJPROP_CORNER, CORNER_LEFT_UPPER);
    ObjectSetInteger(0, name, OBJPROP_XDISTANCE, x);
    ObjectSetInteger(0, name, OBJPROP_YDISTANCE, y);
    ObjectSetInteger(0, name, OBJPROP_XSIZE, width);
    ObjectSetInteger(0, name, OBJPROP_YSIZE, height);
    ObjectSetString(0, name, OBJPROP_TEXT, text);
    ObjectSetInteger(0, name, OBJPROP_COLOR, textColor);
    ObjectSetInteger(0, name, OBJPROP_BGCOLOR, bgColor);
    ObjectSetInteger(0, name, OBJPROP_BORDER_COLOR, C'60,63,65');
    ObjectSetString(0, name, OBJPROP_FONT, "Arial");
    ObjectSetInteger(0, name, OBJPROP_FONTSIZE, (int)(8 * scale));
    ObjectSetInteger(0, name, OBJPROP_SELECTABLE, false);
    ObjectSetInteger(0, name, OBJPROP_STATE, false);
    ObjectSetInteger(0, name, OBJPROP_ZORDER, 1001);
    
    return true;
}

//+------------------------------------------------------------------+
//| –°–û–ó–î–ê–ù–ò–ï –ê–î–ê–ü–¢–ò–í–ù–û–ì–û –ü–û–õ–Ø –í–í–û–î–ê                                  |
//+------------------------------------------------------------------+
bool CreateAdaptiveEdit(string name, string text, int x, int y, int width, int height, double scale) {
    if(ObjectFind(0, name) >= 0) ObjectDelete(0, name);
    
    if(!ObjectCreate(0, name, OBJ_EDIT, 0, 0, 0)) return false;
    
    ObjectSetInteger(0, name, OBJPROP_CORNER, CORNER_LEFT_UPPER);
    ObjectSetInteger(0, name, OBJPROP_XDISTANCE, x);
    ObjectSetInteger(0, name, OBJPROP_YDISTANCE, y);
    ObjectSetInteger(0, name, OBJPROP_XSIZE, width);
    ObjectSetInteger(0, name, OBJPROP_YSIZE, height);
    ObjectSetString(0, name, OBJPROP_TEXT, text);
    ObjectSetInteger(0, name, OBJPROP_COLOR, clrBlack);
    ObjectSetInteger(0, name, OBJPROP_BGCOLOR, C'250,250,250');
    ObjectSetInteger(0, name, OBJPROP_BORDER_COLOR, C'60,63,65');
    ObjectSetString(0, name, OBJPROP_FONT, "Arial");
    ObjectSetInteger(0, name, OBJPROP_FONTSIZE, (int)(8 * scale));
    ObjectSetInteger(0, name, OBJPROP_ALIGN, ALIGN_CENTER);
    
    // –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –î–õ–Ø –†–ê–ë–û–¢–´ –ü–û–õ–ï–ô –í–í–û–î–ê:
    ObjectSetInteger(0, name, OBJPROP_SELECTABLE, false); // –ù–ï –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–π
    ObjectSetInteger(0, name, OBJPROP_READONLY, false);   // –ù–ï —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
    ObjectSetInteger(0, name, OBJPROP_ZORDER, 1002);      // –í—ã—à–µ —á–µ–º –∫–Ω–æ–ø–∫–∏
    
    return true;
}

//+------------------------------------------------------------------+
//| –°–û–ó–î–ê–ù–ò–ï –ê–î–ê–ü–¢–ò–í–ù–û–ô –ú–ï–¢–ö–ò                                        |
//+------------------------------------------------------------------+
bool CreateAdaptiveLabel(string name, string text, int x, int y, color textColor, 
                         int fontSize, double scale) {
    if(ObjectFind(0, name) >= 0) ObjectDelete(0, name);
    
    if(!ObjectCreate(0, name, OBJ_LABEL, 0, 0, 0)) return false;
    
    ObjectSetInteger(0, name, OBJPROP_CORNER, CORNER_LEFT_UPPER);
    ObjectSetInteger(0, name, OBJPROP_XDISTANCE, x);
    ObjectSetInteger(0, name, OBJPROP_YDISTANCE, y);
    ObjectSetString(0, name, OBJPROP_TEXT, text);
    ObjectSetInteger(0, name, OBJPROP_COLOR, textColor);
    ObjectSetString(0, name, OBJPROP_FONT, "Arial");
    ObjectSetInteger(0, name, OBJPROP_FONTSIZE, fontSize);
    ObjectSetInteger(0, name, OBJPROP_SELECTABLE, false);
    ObjectSetInteger(0, name, OBJPROP_ZORDER, 1001);
    
    return true;
}

//+------------------------------------------------------------------+
//| –°–û–ó–î–ê–ù–ò–ï –ê–î–ê–ü–¢–ò–í–ù–û–ì–û –†–ê–ó–î–ï–õ–ò–¢–ï–õ–Ø                                 |
//+------------------------------------------------------------------+
bool CreateAdaptiveSeparator(string name, int x, int y, int width, double scale) {
    if(ObjectFind(0, name) >= 0) ObjectDelete(0, name);
    
    if(!ObjectCreate(0, name, OBJ_RECTANGLE_LABEL, 0, 0, 0)) return false;
    
    ObjectSetInteger(0, name, OBJPROP_CORNER, CORNER_LEFT_UPPER);
    ObjectSetInteger(0, name, OBJPROP_XDISTANCE, x);
    ObjectSetInteger(0, name, OBJPROP_YDISTANCE, y);
    ObjectSetInteger(0, name, OBJPROP_XSIZE, width);
    ObjectSetInteger(0, name, OBJPROP_YSIZE, 1);
    ObjectSetInteger(0, name, OBJPROP_BGCOLOR, C'60,63,65');
    ObjectSetInteger(0, name, OBJPROP_BORDER_TYPE, BORDER_FLAT);
    ObjectSetInteger(0, name, OBJPROP_SELECTABLE, false);
    ObjectSetInteger(0, name, OBJPROP_ZORDER, 1001);
    
    return true;
}

//+------------------------------------------------------------------+
//| –£–î–ê–õ–ï–ù–ò–ï –ü–ê–ù–ï–õ–ò                                                  |
//+------------------------------------------------------------------+
void DeletePanel() {
    ObjectsDeleteAll(0, PANEL_PREFIX);
}